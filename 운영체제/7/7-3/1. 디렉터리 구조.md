# 디렉터리 구조

- 장치 디렉터리 : 장치에 있는 모든 파일들에 대한 파일 이름, 적재 위치, 크기, 형태 등에 관한 정보를 가진다.
- 디렉터리 구조 : 파일 시스템 내부에 있는 많은 파일들을 조직화하는 매커니즘
    > 장치들 간을 연결해주며, 여러가지 상이한 디스크 종류들도 포함

[디렉터리에서 실행되어야 할 기능]

- 탐색(search) : 특정 파일에 대한 항목을 발견하기 위해서 디렉터리를 찾는 기능이다.

- 파일 생성(File Create) : 새로운 파일들을 생성해야 할 필요가 있으면 이를 디렉터리에 첨가하는 기능이다.

- 파일 삭제(File Delete) : 파일이 더 이상 필요 없을 때 디렉터리로부터 삭제하는 기능이다.

- 디렉터리 리스트(Directory List) : 디렉터리의 내용을 보여줄 수 있어야 하고 그 리스트 내의 각 파일에 대한 디렉터리 항목의 내용을 보여줄 수 있어야 하는 기능이다.

- 백업(Backup) : 만약의 경우를 대비하여 일반적으로 파일들을 자기 테이프 등에 복사하여 저장하는 기능이다.


[디렉터리 내에 저장되어 있는 각 파일에 대한 정보]

- 파일명(file name) : 기호화된 파일의 이름

- 파일 형태(file type) : 각기 다른 형태의 파일이 사용되는 시스템들을 위한 파일 형태

- 위치(Location) : 장치에서의 파일 위치를 가리키는 포인터(Pointer)

- 크기(Size) : 파일의 크기와 허용되는 최대 크기

- 보호(Protection) : 읽기, 쓰기, 처리 등을 제어하기 위한 접근 제어 정보이다.

- 사용 횟수(Usage count) : 현재 이 파일을 사용하고 있는 프로세서들의 개수

- 시간, 날짜, 프로세스 식별(Time, Date and Process Identification) : 파일의 생성과 수정 및 프로세스를 위해 보관되며, 보호와 사용 모니터링(Usage Monitoring)에 유용하다.


[일단계 구조 디렉터리]

- 모든 파일들이 같은 디렉터리 내에 위치
    > 모두 상이한 이름을 가져야 하므로 상당한 제약 조건이 따른다.


[이단계 구조 디렉터리]

- 사용자 파일 디렉터리(UFD : User File Directory)와 마스터 파일 디렉터리(MFD: Master File Directory)로 구성되어 있다.

    > MFD에는 사용자의 이름이 등록되어 있고, 각 항목은 한 사람의 사용자에 대한 사용자 디렉터리를 가리킨다.
    > 각 사용자는 자신의 사용자 파일 디렉터리(UFD : User File Directory)를 가지고, 각 사용자 디렉터리는 오직 한 사용자 파일만들 기술한다.

- 일 단계 디렉터리의 단점인 서로 다른 사용자들 간의 파일명의 혼란을 해결한다.


[트리 구조 디렉터리(임의 높이 디렉터리)]

- 이단게 디렉터리의 구조 확장을 위한 일반화된 방법이다.

- 사용자들이 자신의 서브디렉터리(Sub-Directory)를 생성하게 하고 그것에 따라 자신의 파일을 구성하도록 하는 것이다.

- 트리는 루트 디렉터리를 가지고 시스템 내의 모든 파일들은 유일한 경로 이름을 가진다. (예, UNIX 파일 시스템)


- 경로 이름 : 루트로부터 모든 서브디렉터리를 거쳐 지정된 파일까리 이르는 경로이다.

    > 절대 경로 이름(Absolute Path Name) : 루트에서 시작하여 해당 파일이나 서브디렉터리에 이르는 경로 상의 모든 디렉터리 이름을 정의한다.

    > 상대 경로 이름(Relative Path Name) : 현재 디렉터리에서부터의 경로를 정의한다.


[트리 구조 디렉터리의 삭제 방법]

- 디렉터리가 비어 있다면, 그 디렉터리는 간단히 삭제가 가능하다.

- 디렉터리가 비어 있지 않다면, 
    > 사용자가 먼저 그 디렉터리 내에 있는 모든 파일들을 삭제해야 한다.
        ex) MS-DOS의 rd, rdmir 명령

    > 디렉터리의 삭제 요구가 디렉터리 내의 모든 파일 뿐만 아니라 서브 디렉터리들도 제거해야 한다는 조건하에서 수행된다.
        ex) UNIX의 rm 명령


[비순환 구조 디렉터리]

- 트리 구조로 된 디렉터리 시스템 중 가장 일반적인 방법이다.

- 비순환 그래프는 디렉터리들의 서브 디렉터리나 파일을 공유할 수 있도록 허용하고 순환(Cycle)을 불허용한다.

- 파일과 서브디렉터리의 공유 방법

    > 링크(link) : 새로운 디렉터리 항목을 생성하는 것이다.
    공유 파일에 관한 모든 정보를 그대로 복사하여 두 개의 디렉터리에 똑같은 내용의 항목을 갖도록 하는 것이다.
        > 일관성(Consistency) 유지가 어렵다.

- 단순한 트리 구조보다 융통성은 좋으나 그 구조가 너무 복잡하다.

- 파일 삭제 시 공유 파일에 할당된 기억 장소가 언제 해제되며, 재사용할 수 있는가 하는 문제 발생


[일반적 그래프 구조 디렉터리]

- 트리 구조의 디렉터리에 링크를 첨가시킨 일반적 그래프 구조를 디렉터리 시스템에 적용

- 순환(Cycle)이 허용되고 그래프 탐색(Trabersal)알고리즘도 간단하다.

- 순환이 허용됨으로써 무한 순환(infinite loop)이 가능하므로 전역 탐색에는 신중

- 각 디렉터리마다 불필요한 파일의 제거를 위한 쓰레기 수집(Garbage Collection)을 수행한다.

